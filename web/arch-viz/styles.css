:root{
  --bg:#fafafa;
  --fg:#222;
  --muted:#666;
  --accent:#2563eb;
  --card:#ffffff;
  --ring:#e5e7eb;
  --border:#e5e7eb;
  --shadow:0 8px 30px rgba(0,0,0,0.08);
  --layer:#4e79a7;
  --module:#f28e2b;
  --virtual:#9ca3af;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  background:var(--bg); color:var(--fg);
  font:14px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans","Helvetica Neue",Arial,"PingFang SC","Hiragino Sans GB","Microsoft Yahei","WenQuanYi Micro Hei",sans-serif;
}
header{
  display:flex; flex-wrap:wrap; align-items:center; gap:12px;
  padding:12px 16px; border-bottom:1px solid var(--border); background:#fff; position:sticky; top:0; z-index:10;
}
h1{margin:0; font-size:18px}
h1 .sub{font-weight:500; color:var(--muted); margin-left:6px; font-size:14px}
.controls{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.controls select,.controls button{
  padding:6px 10px; border:1px solid var(--border); background:#fff; border-radius:6px; cursor:pointer;
}
.controls button{background:var(--accent); color:#fff; border-color:transparent}
.controls .hint{color:var(--muted); font-size:12px}
main{display:flex; gap:12px; height:calc(100vh - 68px)}
#viz-wrap{flex:1; position:relative}
#viz{width:100%; height:100%; display:block; background:#fff}
footer{padding:8px 16px; color:var(--muted); border-top:1px solid var(--border); background:#fff}
.node circle{stroke:#fff; stroke-width:1.5}
.node text{font-size:12px; fill:#333; pointer-events:none; user-select:none}
.link{stroke:#cbd5e1; stroke-width:1; fill:none; opacity:0.85}
.ring{fill:none; stroke:var(--ring); stroke-dasharray:4 6}
.legend{position:absolute; left:12px; bottom:12px; background:var(--card); border:1px solid var(--border); border-radius:8px; padding:8px 10px; box-shadow:var(--shadow)}
.legend .item{display:flex; align-items:center; gap:8px; color:#444}
.legend .dot{width:10px; height:10px; border-radius:50%}
#detail{
  position:relative; width:360px; min-width:320px; max-width:420px;
  border-left:1px solid var(--border); background:#fff; padding:12px 12px 16px 12px; overflow:auto;
}
#detail.hidden{display:none}
.card{position:relative; background:var(--card); border:1px solid var(--border); border-radius:10px; padding:12px; box-shadow:var(--shadow)}
.card h2{margin:0 0 8px 0; font-size:16px}
.card .meta{color:var(--muted); font-size:12px; margin-bottom:8px}
.card .kv{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; font-size:12px; background:#f6f8fa; border:1px solid var(--border); border-radius:8px; padding:8px; overflow:auto; max-height:220px}
.card .close{
  position:absolute; top:8px; right:8px; width:28px; height:28px; border-radius:6px; border:1px solid var(--border); background:#fff; cursor:pointer;
}
.badge{display:inline-block; padding:2px 6px; border:1px solid var(--border); border-radius:999px; background:#f8fafc; margin-right:6px; font-size:12px}
.hr{height:1px; background:var(--border); margin:10px 0}
.note{font-size:12px}
.color-layer{background:var(--layer)}
.color-module{background:var(--module)}
.color-virtual{background:var(--virtual)}